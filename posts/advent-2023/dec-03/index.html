<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="canonical" href=https://yamlscript.org/posts/advent-2023/dec-03/>

    <link href="/assets/main.css" rel="stylesheet" />

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet">

    <title>
      Load em Up!
      
         | YAMLScript
      
    </title>

    <link rel="icon" type= “image/x-icon” href="/images/favicon.ico">

    <meta property="og:title" content="Load em Up!">
    <meta property="og:site_name" content="YAMLScript"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://yamlscript.org/posts/advent-2023/dec-03/"/>
    <meta name="twitter:card" content="summary_large_image">

    

    
    
      
    
    
      <meta name="description" content="Load em Up! 03 Dec 2023 | 3 min read On the 3rd day of Advent, my YS gave to me... A sequence in a map tree! Did you know that all JSON is...">
      <meta property="og:description" content="Load em Up! 03 Dec 2023 | 3 min read On the 3rd day of Advent, my YS gave to me... A sequence in a map tree! Did you know that all JSON is...">
      <meta name="description" content="Load em Up! 03 Dec 2023 | 3 min read On the 3rd day of Advent, my YS gave to me... A sequence in a map tree! Did you know that all JSON is..."/>
    

    
      
    
    

    
      <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
      <script>mermaid.initialize({startOnLoad:true});</script>
    
  </head>
  <body>
    <div class="layout-wrapper">

      <header class="header">
        <div class="header__content">
          <h1 class="site-title">
            <a href=/>
              <img src="/images/yamlscript.svg">
              <!-- YAMLScript -->
            </a>
          </h1>

          
            <nav class="nav">
              <ul class="nav__list">
                
                  
                  

                  

                  

                  <li class="nav-item">
                    <a href="/doc"  >Docs</a>
                  </li>
                
                  
                  

                  

                  

                  <li class="nav-item">
                    <a href="/blog"  >Blog</a>
                  </li>
                
                  
                  

                  

                  

                  <li class="nav-item">
                    <a href="/about"  >About</a>
                  </li>
                
              </ul>
            </nav>

          

        </div>
      </header>

      <main class="main">
        
<article class="post">
  <header class="post__header">
    <h1>Load em Up!</h1>
    <div class="post__details">
      <time datetime="2023-12-03">
        03 Dec 2023
      </time>
      <span> | </span>
      <span>3 min read</span>
    </div>
  </header>

  <main class="post__content">
    <blockquote>
<p>On the 3rd day of Advent, my YS gave to me...<br>
A sequence in a map tree!</p>
</blockquote>
<p>Did you know that all JSON <em>is</em> YAML?
You should, because I told you that <a href="/posts/advent-2023/dec-02/">yesterday</a>!</p>
<p>It's true.
YAML is a superset of JSON.
Both in terms of syntax and data model.</p>
<p>This means that any possible valid JSON input is also valid YAML input.
A proper <strong>YAML 1.2</strong> loader can load a given JSON input into a data structure
that is perfectly equivalent to the data structure that a JSON loader would have
produced from the same input.</p>
<h3>Welcome to day 3 of YAMLScript Advent 2023!</h3>
<p>The YAML/JSON relationship has some interesting implications for people
interacting with systems that read YAML or JSON as input.</p>
<p>In general people prefer to read or write YAML because it's more human-friendly,
while JSON is more machine-friendly because of its sheer simplicity and robust
tooling.
It's quite common to see people configure their systems that have JSON inputs
by using YAML instead, and setting things up to convert the hand maintined YAML
to JSON before the system sees it.
It can also be helpful to format large JSON API responses as YAML so that they
are easier to read.</p>
<p>Going the other way, people can refactor large YAML configurations by first
converting them to JSON, using JSON tools like <code>jq</code> to manipulate them and then
converting them back to YAML.</p>
<p>YAMLScript is an ideal technology for performing these kinds of conversions and
manipulations.</p>
<h3>Loading vs Running YAMLScript</h3>
<p>On one hand, YAMLScript is a complete programming language that you can use to
for writing new applications and libraries.
We'll cover that extensively in the coming days.
But today we are covering YAMLScript's purpose we just described: loading YAML
files; possibly transforming them dynamically along the way.</p>
<p>This use of YAMLScript is calling &quot;loading&quot; and can be done on most existing
YAML files and all existing JSON files.</p>
<details><summary><What does "most" mean?</summary>
<p>When I say &quot;most YAML input files&quot; I mean YAML input that fits into the JSON
data model.
Almost all YAML files used for configuration purposes fit into this category.</p>
<p>Specifically:</p>
<ul>
<li>Mapping keys must be strings.</li>
<li>Aliases may not create circular references.</li>
<li>Custom tags (those beyond the YAML 1.2 JSON Schema) must not be used.</li>
</ul>
<p>I've never seen any of those things used in a configuration file.</p>
</details>
<p>Let's look at an example.</p>
<p>YAML uses the term &quot;load&quot; to refer to the process of a computer program
converting a YAML text to a data structure in memory.
It is common for a YAML framework to have a <code>load</code> (and <code>dump</code>) function or
method as its primary API.</p>
<p>Here's a Python single line program that loads a YAML text into a Python
dictionary and prints the Python serialization of it:</p>
<pre class="language-bash"><code class="language-bash">$ python <span class="token parameter variable">-c</span> <span class="token string">'import yaml; print(yaml.safe_load("Advent day: 3"))'</span><br><span class="token punctuation">{</span><span class="token string">'Advent day'</span><span class="token builtin class-name">:</span> <span class="token number">3</span><span class="token punctuation">}</span></code></pre>
<p>YAMLScript will soon offer a binding in your favorite language that will do the
same thing:</p>
<pre class="language-bash"><code class="language-bash">$ ys <span class="token parameter variable">--load</span> <span class="token string">'foo: bar'</span><br>$ python <span class="token parameter variable">-c</span> <span class="token string">'import yamlscript; print(yamlscript.load("Advent day: 3"))'</span><br><span class="token punctuation">{</span><span class="token string">'Advent day'</span><span class="token builtin class-name">:</span> <span class="token number">3</span><span class="token punctuation">}</span></code></pre>
<p>A major goal of the YAMLScript project is to have these YAMLScript binding
libraries be the best way to load YAML config files in all modern programming
languages.
This will be a big improvement over the current situation where every YAML
framework has its own API and its own set of bugs and quirks.
YAMLScript loaders will all support YAML 1.2 and the YAML 1.2 JSON Schema.
They use an underlying YAML parser that can pass all of the <a href="https://matrix.yaml.info/">YAML Test Suite</a>.</p>
<blockquote>
<p>NOTE: From now on I will often use &quot;YS&quot; to refer to &quot;YAMLScript&quot;.
This is distinct from &quot;ys&quot; which is the command-line tool that runs/loads
YAMLScript.</p>
</blockquote>

  </main>

  <aside class="post__aside">
    <div class="post__tags">
      
        
        <a href="/tags/blog/">#blog</a>
      
        
        <a href="/tags/advent-2023/">#advent-2023</a>
      
    </div>

    <nav class="post__pagination">

        <a href="/posts/advent-2023/dec-02/">
          <span>Twas a Bit</span>
          <span>→</span>
        </a>

      
    </nav>
  </aside>

</article>
      </main>

      <footer class="footer">
        <div class="footer__content">

          <ul class="hero__social-links">
            
              
            

            

              
                

                
                  
                

                <li>
                  <a href="https://github.com/yaml/yamlscript" target="_blank" rel="noopener noreferrer" >GitHub</a>
                </li>
              
                

                
                  
                

                <li>
                  <a href="/feed.xml" target="_blank" rel="noopener noreferrer" >RSS</a>
                </li>
              
            
          </ul>

          
            <p class="footer__attribution">
      Powered by
      <a href="https://www.11ty.dev" target="_blank" rel="noopener">Eleventy</a>.
      Theme:
      <a href="https://github.com/yinkakun/eleventy-duo" target="_blank" rel="noopener noreferrer">Eleventy Duo</a>.
            </p>
          

        </div>
      </div>

    </footer>

    <script src="/assets/main.js"></script>
  </body>
</html>
